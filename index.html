<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Unsolved ‚Äî Share True Strange Events</title>
  <meta name="description" content="Unsolved ‚Äî share true strange events & real world problems" />
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b1220;--card:#0f1724;--muted:#94a3b8}
    html,body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
    .app-bg{background:linear-gradient(180deg,#071021 0%,#081426 40%,#071020 100%);}
    .glass{backdrop-filter: blur(6px); background-color: rgba(255,255,255,0.02);}
    .logo-glow{filter:drop-shadow(0 6px 18px rgba(96,165,250,0.12));}
  </style>
</head>
<body class="min-h-screen app-bg text-slate-100 antialiased">
  <header class="w-full border-b border-slate-800/60">
    <div class="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-md bg-gradient-to-tr from-indigo-600 to-cyan-400 flex items-center justify-center logo-glow">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2v6"></path><path d="M6 8h12"></path><path d="M3 22h18"></path><path d="M9 12a3 3 0 006 0"></path></svg>
        </div>
        <div>
          <h1 class="text-lg font-bold">Unsolved</h1>
          <p class="text-xs text-slate-400 -mt-1">True events. Strange problems.</p>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <div class="hidden sm:flex items-center gap-2">
          <input id="search" class="bg-transparent border border-slate-700 px-3 py-1 rounded-md text-sm focus:outline-none" placeholder="Search stories or tags...">
        </div>
        <button id="newPostBtn" class="px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 rounded-md text-sm font-semibold">+ New Post</button>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-6 grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- LEFT: Feed -->
    <section class="md:col-span-2">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">Feed</h2>
        <div class="text-sm text-slate-400">Showing <span id="visibleCount">0</span> posts</div>
      </div>

      <div id="feed" class="space-y-4">
        <!-- Posts injected here -->
      </div>

      <div id="emptyState" class="hidden mt-6 p-6 glass rounded-md border border-slate-700 text-slate-300">
        <h3 class="text-lg font-medium">No posts yet</h3>
        <p class="text-sm text-slate-400 mt-2">Be the first to share a true strange event or an unsolved real problem.</p>
        <div class="mt-3">
          <button id="emptyNew" class="px-3 py-2 bg-indigo-600 rounded-md">Create a post</button>
        </div>
      </div>
    </section>

    <!-- RIGHT: Sidebar -->
    <aside class="md:col-span-1">
      <div class="glass p-4 rounded-md border border-slate-700 mb-4">
        <h3 class="font-semibold">Categories</h3>
        <div class="mt-3 grid grid-cols-2 gap-2">
          <button class="catBtn px-2 py-1 text-sm rounded-md border border-slate-700">All</button>
          <button class="catBtn px-2 py-1 text-sm rounded-md border border-slate-700">Mystery</button>
          <button class="catBtn px-2 py-1 text-sm rounded-md border border-slate-700">Paranormal</button>
          <button class="catBtn px-2 py-1 text-sm rounded-md border border-slate-700">Problems</button>
          <button class="catBtn px-2 py-1 text-sm rounded-md border border-slate-700">Tech</button>
          <button class="catBtn px-2 py-1 text-sm rounded-md border border-slate-700">Funny</button>
        </div>
      </div>

      <div class="glass p-4 rounded-md border border-slate-700 mb-4">
        <h3 class="font-semibold">Top Tags</h3>
        <div id="tags" class="mt-3 flex flex-wrap gap-2 text-sm">
          <!-- tags inserted -->
        </div>
      </div>

      <div class="glass p-4 rounded-md border border-slate-700">
        <h3 class="font-semibold">About Unsolved</h3>
        <p class="text-sm text-slate-400 mt-2">Share real events, report odd problems, and help each other find answers. Please be honest ‚Äî this is for true things.</p>
      </div>
    </aside>
  </main>

  <!-- Post Modal (hidden) -->
  <div id="modal" class="fixed inset-0 z-50 hidden items-center justify-center px-4 py-6">
    <div class="absolute inset-0 bg-black/60"></div>
    <div class="relative w-full max-w-2xl bg-[#061021] border border-slate-800 rounded-lg p-6 glass">
      <div class="flex items-start justify-between gap-4">
        <h3 class="text-lg font-semibold">Create a new post</h3>
        <button id="closeModal" class="text-slate-400 hover:text-white">‚úï</button>
      </div>

      <div class="mt-4 space-y-3">
        <input id="postTitle" class="w-full bg-transparent border border-slate-700 px-3 py-2 rounded-md" placeholder="Short title (what happened)">
        <textarea id="postBody" rows="6" class="w-full bg-transparent border border-slate-700 px-3 py-2 rounded-md" placeholder="Describe the event or problem. Be honest ‚Äî this is for true events."></textarea>
        <div class="flex items-center gap-3">
          <select id="postCategory" class="bg-transparent border border-slate-700 px-2 py-1 rounded-md text-sm">
            <option> Mystery</option>
            <option> Paranormal</option>
            <option> Problems</option>
            <option> Tech</option>
            <option> Funny</option>
          </select>
          <input id="postTags" class="bg-transparent border border-slate-700 px-2 py-1 rounded-md text-sm" placeholder="comma,separated,tags">
          <label class="ml-auto flex items-center gap-2 text-sm text-slate-400"><input type="checkbox" id="anonymous" class="checked:bg-indigo-500"> Post anonymously</label>
        </div>

        <div class="flex items-center justify-end gap-2">
          <button id="postSave" class="px-3 py-1.5 bg-indigo-600 rounded-md font-semibold">Post</button>
        </div>
      </div>
    </div>
  </div>

  <template id="postTemplate">
    <article class="p-4 glass rounded-md border border-slate-700">
      <header class="flex items-start gap-3">
        <div class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-sm font-semibold">U</div>
        <div class="flex-1">
          <div class="flex items-center justify-between">
            <div class="text-sm">
              <div class="post-title font-semibold"></div>
              <div class="text-xs text-slate-400 post-meta"></div>
            </div>
            <div class="text-sm text-slate-400">#<span class="post-cat"></span></div>
          </div>
        </div>
      </header>

      <div class="mt-3 text-sm post-body text-slate-200"></div>

      <footer class="mt-4 flex items-center gap-3 text-sm text-slate-400">
        <button class="likeBtn px-2 py-1 rounded-md border border-slate-700">üëç <span class="likeCount">0</span></button>
        <button class="commentToggle px-2 py-1 rounded-md border border-slate-700">üí¨ <span class="commentCount">0</span></button>
        <button class="reportBtn px-2 py-1 rounded-md border border-slate-700">‚öë Report</button>
        <div class="ml-auto text-xs text-slate-500 post-date"></div>
      </footer>

      <div class="mt-3 hidden commentsArea border-t border-slate-800 pt-3">
        <div class="space-y-2 commentList"></div>
        <div class="mt-3 flex gap-2">
          <input class="newComment flex-1 bg-transparent border border-slate-700 px-2 py-1 rounded-md text-sm" placeholder="Write a helpful comment...">
          <button class="addComment px-3 py-1 rounded-md border border-slate-700">Reply</button>
        </div>
      </div>
    </article>
  </template>

  <script>
    // Simple front-end prototype for Unsolved ‚Äî data saved in localStorage.
    const POSTS_KEY = 'unsolved_posts_v1';

    // sample posts if empty
    const sample = [
      {
        id: crypto.randomUUID(),
        title: 'Strange lights over neighborhood',
        body: 'Last Tuesday at 1:12 AM multiple neighbors saw a cluster of blue lights moving silently across the sky for 3 minutes. No aircraft sound. Anyone else?',
        category: 'Mystery',
        tags: ['lights','ufo'],
        anonymous: true,
        likes: 4,
        comments: [{id:crypto.randomUUID(),text:'I saw it too!',author:'Ankita'}],
        date: Date.now() - 1000*60*60*24*2
      },
      {
        id: crypto.randomUUID(),
        title: 'Phone shows battery drain only in shade',
        body: 'Whenever I take my phone into a shaded area it instantly drops 10% battery. Works fine in sunlight. This is a real strange problem ‚Äî any ideas?',
        category: 'Tech',
        tags: ['battery','phone','weird'],
        anonymous: false,
        likes: 2,
        comments: [],
        date: Date.now() - 1000*60*60*8
      }
    ];

    function loadPosts(){
      const raw = localStorage.getItem(POSTS_KEY);
      if(!raw){
        localStorage.setItem(POSTS_KEY, JSON.stringify(sample));
        return sample.slice();
      }
      try{ return JSON.parse(raw); }catch(e){ localStorage.removeItem(POSTS_KEY); return sample.slice(); }
    }

    function savePosts(posts){ localStorage.setItem(POSTS_KEY, JSON.stringify(posts)); }

    let posts = loadPosts();

    // DOM refs
    const feed = document.getElementById('feed');
    const visibleCount = document.getElementById('visibleCount');
    const modal = document.getElementById('modal');
    const newPostBtn = document.getElementById('newPostBtn');
    const closeModal = document.getElementById('closeModal');
    const postSave = document.getElementById('postSave');
    const postTitle = document.getElementById('postTitle');
    const postBody = document.getElementById('postBody');
    const postCategory = document.getElementById('postCategory');
    const postTags = document.getElementById('postTags');
    const anonymous = document.getElementById('anonymous');
    const emptyState = document.getElementById('emptyState');
    const emptyNew = document.getElementById('emptyNew');
    const search = document.getElementById('search');

    function formatDate(ts){
      const d = new Date(ts);
      return d.toLocaleString();
    }

    function renderTags(){
      const tagWrap = document.getElementById('tags');
      const all = new Map();
      posts.flatMap(p=>p.tags||[]).forEach(t=> all.set(t.toLowerCase(),(all.get(t.toLowerCase())||0)+1));
      tagWrap.innerHTML = '';
      Array.from(all.entries()).slice(0,10).forEach(([t,c])=>{
        const btn = document.createElement('button');
        btn.className='px-2 py-1 text-xs rounded-md border border-slate-700';
        btn.textContent = `#${t} (${c})`;
        btn.onclick = ()=>{ filterByTag(t); };
        tagWrap.appendChild(btn);
      });
    }

    function filterByTag(t){
      document.querySelectorAll('.catBtn').forEach(b=>b.classList.remove('bg-indigo-700'));
      renderFeed(posts.filter(p=> (p.tags||[]).map(x=>x.toLowerCase()).includes(t)));
    }

    function renderFeed(list){
      feed.innerHTML = '';
      if(!list||list.length===0){ emptyState.classList.remove('hidden'); visibleCount.textContent = 0; return; }
      emptyState.classList.add('hidden');
      visibleCount.textContent = list.length;

      const tpl = document.getElementById('postTemplate');
      list.sort((a,b)=>b.date-a.date).forEach(p=>{
        const node = tpl.content.cloneNode(true);
        const art = node.querySelector('article');
        art.dataset.id = p.id;
        node.querySelector('.post-title').textContent = p.title || '(no title)';
        node.querySelector('.post-body').textContent = p.body;
        node.querySelector('.post-meta').textContent = p.anonymous ? 'Anonymous' : 'By User';
        node.querySelector('.post-cat').textContent = p.category;
        node.querySelector('.likeCount').textContent = p.likes||0;
        node.querySelector('.commentCount').textContent = (p.comments||[]).length;
        node.querySelector('.post-date').textContent = formatDate(p.date);

        // comments
        const commentsArea = node.querySelector('.commentsArea');
        const commentList = node.querySelector('.commentList');
        (p.comments||[]).forEach(c=>{
          const div = document.createElement('div');
          div.className='text-sm bg-slate-900/30 p-2 rounded-md';
          div.textContent = `${c.author||'Anon'}: ${c.text}`;
          commentList.appendChild(div);
        });

        // likes
        node.querySelector('.likeBtn').onclick = ()=>{
          p.likes = (p.likes||0)+1; savePosts(posts); renderFeed(posts);
        };

        // comment toggle
        node.querySelector('.commentToggle').onclick = (e)=>{
          commentsArea.classList.toggle('hidden');
        };

        // add comment
        node.querySelector('.addComment').onclick = ()=>{
          const input = art.querySelector('.newComment');
          const text = input.value.trim(); if(!text) return;
          p.comments = p.comments || [];
          p.comments.push({id:crypto.randomUUID(), text, author:'User'});
          savePosts(posts); renderFeed(posts);
        };

        // report
        node.querySelector('.reportBtn').onclick = ()=>{
          if(confirm('Report this post as inappropriate?')){
            // mark as reported (in this prototype we'll just remove)
            posts = posts.filter(x=>x.id!==p.id); savePosts(posts); renderFeed(posts);
            alert('Post removed (prototype). In a real app moderators would review this.');
          }
        };

        feed.appendChild(node);
      });
    }

    // initial render
    renderFeed(posts);
    renderTags();

    // category buttons
    document.querySelectorAll('.catBtn').forEach(b=>{
      b.onclick = ()=>{
        const cat = b.textContent.trim();
        document.querySelectorAll('.catBtn').forEach(x=>x.classList.remove('bg-indigo-700','text-white'));
        b.classList.add('bg-indigo-700','text-white');
        if(cat==='All') renderFeed(posts); else renderFeed(posts.filter(p=>p.category.toLowerCase()===cat.toLowerCase()));
      };
    });

    // modal actions
    newPostBtn.onclick = ()=>{ modal.classList.remove('hidden'); modal.style.display='flex'; }
    emptyNew.onclick = ()=>{ modal.classList.remove('hidden'); modal.style.display='flex'; }
    closeModal.onclick = ()=>{ modal.classList.add('hidden'); modal.style.display='none'; }

    postSave.onclick = ()=>{
      const title = postTitle.value.trim();
      const body = postBody.value.trim();
      if(!body){ alert('Please write the event or problem.'); return; }
      const p = {
        id: crypto.randomUUID(),
        title: title || body.slice(0,40),
        body,
        category: postCategory.value.trim() || 'Misc',
        tags: postTags.value.split(',').map(t=>t.trim()).filter(Boolean),
        anonymous: anonymous.checked,
        likes:0,
        comments:[],
        date: Date.now()
      };
      posts.unshift(p); savePosts(posts); renderFeed(posts); renderTags();
      // reset
      postTitle.value=''; postBody.value=''; postTags.value=''; anonymous.checked=false;
      modal.classList.add('hidden'); modal.style.display='none';
    };

    // search
    search.addEventListener('input', ()=>{
      const q = search.value.trim().toLowerCase();
      if(!q){ renderFeed(posts); return; }
      renderFeed(posts.filter(p=> (p.title+p.body+(p.tags||[]).join(' ')).toLowerCase().includes(q) ));
    });

    // accessibility: close modal with escape
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ modal.classList.add('hidden'); modal.style.display='none'; } });

    // small UX: click outside modal closes
    modal.addEventListener('click', (e)=>{ if(e.target===modal) { modal.classList.add('hidden'); modal.style.display='none'; } });

  </script>
</body>
</html>
